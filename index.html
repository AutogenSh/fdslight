<!DOCTYPE html>
<html lang="en-us">
  <head>
    <meta charset="UTF-8">
    <title>Fdslight by fdslight</title>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="stylesheet" type="text/css" href="stylesheets/normalize.css" media="screen">
    <link href='https://fonts.googleapis.com/css?family=Open+Sans:400,700' rel='stylesheet' type='text/css'>
    <link rel="stylesheet" type="text/css" href="stylesheets/stylesheet.css" media="screen">
    <link rel="stylesheet" type="text/css" href="stylesheets/github-light.css" media="screen">
  </head>
  <body>
    <section class="page-header">
      <h1 class="project-name">Fdslight</h1>
      <h2 class="project-tagline">IP层代理软件(VPN),支持分发，主要部署在路由器节点上，可以加速你的海外网络访问</h2>
      <a href="https://github.com/fdslight/fdslight" class="btn">View on GitHub</a>
      <a href="https://github.com/fdslight/fdslight/zipball/master" class="btn">Download .zip</a>
      <a href="https://github.com/fdslight/fdslight/tarball/master" class="btn">Download .tar.gz</a>
    </section>

    <section class="main-content">
      <h3>
<a id="功能说明" class="anchor" href="#%E5%8A%9F%E8%83%BD%E8%AF%B4%E6%98%8E" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>功能说明</h3>

<p>客户端有两大模式，local模式和gateway模式，local模式是让本地机器走代理上网的，gateway模式是让局域网其他机器走智能代理的，local模式功能没gateway多，gateway模式支持局域网任何机器走代理，local模式只支持Linux。最后说明fdslight只能运行在Linux上</p>

<h3>
<a id="安装环境以下教程是在ubuntu1604进行的" class="anchor" href="#%E5%AE%89%E8%A3%85%E7%8E%AF%E5%A2%83%E4%BB%A5%E4%B8%8B%E6%95%99%E7%A8%8B%E6%98%AF%E5%9C%A8ubuntu1604%E8%BF%9B%E8%A1%8C%E7%9A%84" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>安装环境（以下教程是在Ubuntu16.04进行的）</h3>

<p>Linux机器，客户端服务端都需要Linux，python3。</p>

<h3>
<a id="安装第一步准备软件运行环境" class="anchor" href="#%E5%AE%89%E8%A3%85%E7%AC%AC%E4%B8%80%E6%AD%A5%E5%87%86%E5%A4%87%E8%BD%AF%E4%BB%B6%E8%BF%90%E8%A1%8C%E7%8E%AF%E5%A2%83" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>安装第一步（准备软件运行环境）</h3>

<p>1.Python3说明：ubuntu自带的Python3可能会有点麻烦，最好自己编译python3,而且编译Python3也很简单<br>
2.Python3下载:wget <a href="https://www.python.org/ftp/python/3.5.2/Python-3.5.2.tgz">https://www.python.org/ftp/python/3.5.2/Python-3.5.2.tgz</a><br>
3.解压Python3: tar zxf Python-3.5.2.tgz<br>
4.假设把Python3安装到/opt目录，你也可以选择其他目录，这里以/opt目录为例<br>
5.命令:cd Python-3.5.2<br>
6.命令:./configure --prefix=/opt --enable-ipv6<br>
7.命令:make -j2<br>
8.命令(如果提示要输入密码那么就输入密码):sudo make install  </p>

<h3>
<a id="安装第二步安装软件的python3依赖库" class="anchor" href="#%E5%AE%89%E8%A3%85%E7%AC%AC%E4%BA%8C%E6%AD%A5%E5%AE%89%E8%A3%85%E8%BD%AF%E4%BB%B6%E7%9A%84python3%E4%BE%9D%E8%B5%96%E5%BA%93" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>安装第二步(安装软件的Python3依赖库)</h3>

<p>1.首先需要安装python的dnspython和pycrypto库，dnspython无论如何一定要，如果使用默认的加密方式，那么需要pycrypto库<br>
2.命令：cd /opt/bin<br>
3.命令：sudo ./pip3 install dnspython3<br>
4.命令：sudo ./pip3 install pycrypto  </p>

<h3>
<a id="服务端安装" class="anchor" href="#%E6%9C%8D%E5%8A%A1%E7%AB%AF%E5%AE%89%E8%A3%85" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>服务端安装</h3>

<p>1.首先进入下载的fdslight的目录,里面有个install.py文件<br>
2.命令：/opt/bin/python3 install.py server /opt/include/python3.5m<br>
3.修改/etc/sysctl.conf：net.ipv4.ip_forward=1  </p>

<h3>
<a id="客戶端gateway模式安装" class="anchor" href="#%E5%AE%A2%E6%88%B6%E7%AB%AFgateway%E6%A8%A1%E5%BC%8F%E5%AE%89%E8%A3%85" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>客戶端gateway模式安装</h3>

<p>1.在ubuntu desktop版本下已经默认安装了linux headers,你不需要安装，如果不是ubuntu需要安装linux headers,即内核开发包，<strong>如果你的机器更新了内核，你需要重新安装一次</strong><br>
2.进入下载的fdslight的目录<br>
3.命令：/opt/bin/python3 install.py gateway /opt/include/python3.5m  </p>

<h3>
<a id="客戶端local模式安装" class="anchor" href="#%E5%AE%A2%E6%88%B6%E7%AB%AFlocal%E6%A8%A1%E5%BC%8F%E5%AE%89%E8%A3%85" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>客戶端local模式安装</h3>

<p>1.进入下载的fdslight的目录<br>
2.命令：/opt/bin/python3 install.py local /opt/include/python3.5m  </p>

<h3>
<a id="安装完成后配置说明" class="anchor" href="#%E5%AE%89%E8%A3%85%E5%AE%8C%E6%88%90%E5%90%8E%E9%85%8D%E7%BD%AE%E8%AF%B4%E6%98%8E" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>安装完成后配置说明</h3>

<p>1.文件结构请看fdslight项目源码上面的wiki页面，传送连接:<a href="https://github.com/fdslight/fdslight/wiki/">https://github.com/fdslight/fdslight/wiki/</a> 一些文件结构说明<br>
2.请详细阅读配置文件注释，上面有给了每个配置选项的具体说明  </p>

<h3>
<a id="启动命令的说明表示或的意思" class="anchor" href="#%E5%90%AF%E5%8A%A8%E5%91%BD%E4%BB%A4%E7%9A%84%E8%AF%B4%E6%98%8E%E8%A1%A8%E7%A4%BA%E6%88%96%E7%9A%84%E6%84%8F%E6%80%9D" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>启动命令的说明("|"表示或的意思)</h3>

<p>sudo /opt/bin/python3 main.py -m server|gateway|local -d start|debug|stop  </p>

<h3>
<a id="服务端的特别说明" class="anchor" href="#%E6%9C%8D%E5%8A%A1%E7%AB%AF%E7%9A%84%E7%89%B9%E5%88%AB%E8%AF%B4%E6%98%8E" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>服务端的特别说明</h3>

<p>1.你需要运行fdslight根目录下的server_nat_script.sh文件，如果你修改了配置文件fn_server.py的subnet选项，需要修改该脚本文件  </p>

<h3>
<a id="客户端gateway模式的特别说明" class="anchor" href="#%E5%AE%A2%E6%88%B7%E7%AB%AFgateway%E6%A8%A1%E5%BC%8F%E7%9A%84%E7%89%B9%E5%88%AB%E8%AF%B4%E6%98%8E" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>客户端gateway模式的特别说明</h3>

<p>1.网关模式本地机器无法通过代理，局域网的其他的机器可以走代理
2.要使局域网的其他机器可以走代理，你需要设置局域网其他机器的网关为运行fdslight客户端的地址，DNS也是fdslight客户端的地址</p>

<h3>
<a id="客户端local模式的特别说明以ubuntu-desktop发行版说明" class="anchor" href="#%E5%AE%A2%E6%88%B7%E7%AB%AFlocal%E6%A8%A1%E5%BC%8F%E7%9A%84%E7%89%B9%E5%88%AB%E8%AF%B4%E6%98%8E%E4%BB%A5ubuntu-desktop%E5%8F%91%E8%A1%8C%E7%89%88%E8%AF%B4%E6%98%8E" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>客户端local模式的特别说明(以ubuntu desktop发行版说明）</h3>

<p>1.fn_local.py文件有个virtual_dns选项，需要把主机的DNS改成这个DNS地址（如果是DHCP分配地址的方式，请把他改成只地址的选项，如下图）
<img src="https://github.com/fdslight/fdslight/blob/master/images/fdsl_local_config.png?raw=true" alt="local配置图"></p>

<p>2.改好之后需要断开网络然后重启网络，但是此时如果运行fdslight，或导致退出，无论如何，你都要重新启动或者启动fdslight，参考图  </p>

<p><img src="https://github.com/fdslight/fdslight/blob/master/images/fdsl_local_chg_nw.png?raw=true" alt="网络中断"></p>

      <footer class="site-footer">
        <span class="site-footer-owner"><a href="https://github.com/fdslight/fdslight">Fdslight</a> is maintained by <a href="https://github.com/fdslight">fdslight</a>.</span>

        <span class="site-footer-credits">This page was generated by <a href="https://pages.github.com">GitHub Pages</a> using the <a href="https://github.com/jasonlong/cayman-theme">Cayman theme</a> by <a href="https://twitter.com/jasonlong">Jason Long</a>.</span>
      </footer>

    </section>

  
  </body>
</html>
